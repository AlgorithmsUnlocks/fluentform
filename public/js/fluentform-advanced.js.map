{"version":3,"sources":["webpack:///webpack/bootstrap 197bb7ce9088f86892fc","webpack:///./resources/assets/public/fluentform-advanced.js","webpack:///./resources/assets/public/Pro/dom-net-promoter.js","webpack:///./resources/assets/public/Pro/dom-repeat.js","webpack:///./resources/assets/public/Pro/dom-rating.js","webpack:///./resources/assets/public/Pro/form-conditionals.js","webpack:///./resources/assets/public/Pro/_ConditionClass.js","webpack:///./resources/assets/public/Pro/file-uploader.js","webpack:///./resources/assets/public/Pro/slider.js","webpack:///./resources/assets/public/Pro/calculations.js"],"names":["jQuery","document","ready","$","initNetPromoter","initRepeatButtons","ratingDom","$allForms","each","formInDex","formItem","$theForm","formInstanceSelector","attr","form","window","console","log","formId","form_id_selector","formSelector","form_instance","sliderInstance","formSlider","fluentFormVars","fileUploader","initRepeater","formConditional","init","calculation","on","e","data","updateSlider","goBackToStep","animDuration","isScrollTop","actionType","formSliderInstance","sp","startsWith","str","lastIndexOf","endsWith","offset","length","String","prototype","netPromoterDoms","index","netPromoterDom","$netPromoterDoms","$this","addClass","prevAll","removeClass","nextAll","repeat","repeatItem","$repeatItem","repeatCols","find","containerHeight","height","elementHeight","marginTop","css","elementInputHeight","outerHeight","registerRepeaterButtonsOldVersion","btnPlus","repeatParent","closest","maxRepeat","parseInt","currentRepeatItems","hide","btnSet","itemLength","i","div","el","tabIndex","cloned","clone","newId","Date","getTime","itemProp","value","id","prop","insertAfter","eq","focus","isDeleted","btnMinus","show","siblings","remove","registerRepeaterHandler","$btnPlus","$table","$tr","existingCount","$freshCopy","td","oldDataName","rootName","firstTabIndex","els","$el","trigger","$btnMinus","ratingDoms","$ratingDom","targetId","ratingTextSelector","$icon","setTimeout","checkedStar","parent","formCondition","watchableFields","formData","getTheForm","conditionals","fieldName","field","conditions","condition","getElement","getFormData","conditionAppInstance","ConditionApp","name","setFormData","hideShowElements","getCalculatedStatuses","items","itemName","status","$parent","slideDown","slideUp","type","item","is","val","replace","push","$theform","fields","counter","field_statues","Object","keys","key","evaluate","result","forEach","evalValue","getItemEvaluateValue","operator","indexOf","Number","$form","initUploader","element","uploadedList","class","style","append","rules","maxFiles","acceptedFileTypes","allowed_file_types","join","allowed_image_types","showUploadError","msg","elName","message","fileupload","dataType","url","ajaxUrl","change","files","empty","html","remaining","max_file_count","validationErrors","validateFile","add","previewContainer","context","previewThumb","previewDetails","thumb","getThumbnail","errorInline","fileProgress","upload_start_txt","progressBarInline","fileName","removeBtn","fileSize","getFileSize","size","maxWidth","width","submit","progress","loaded","total","text","uploading_txt","done","error","upload_completed_txt","file","messages","fail","errors","jqXHR","responseJSON","responseText","match","URL","createObjectURL","canvas","createElement","zIndex","position","border","ctx","getContext","fillStyle","fillRect","font","textAlign","fillText","substr","toDataURL","returnFileSize","toFixed","registerFileRemove","preventDefault","elFiles","filePath","post","path","action","then","response","fileTypes","fileTypesMessage","acceptFileTypes","RegExp","fileExt","split","pop","toLowerCase","test","activeStep","stepAnimationDuration","enable_step_data_persistency","enable_step_page_resume","isRtl","is_rtl","isPopulatingStepData","removePrevFromFirstFirstStep","getFormInstance","fluentFormApp","initFormWithSavedState","getJSON","form_id","populateFormDataAndSetActiveStep","step_completed","toString","call","row","columns","$checkboxes","cbox","inArray","meta_key","options","$select","k","v","$tbody","arr","appendTo","$elem","initStepSlider","stepsWrapper","formSteps","totalSteps","stepTitles","last","hasClass","stepProgressBarHandle","registerStepNavigators","stepData","completeness","progressBar","span","stepText","step_text","stepTitle","which","btn","current","formInstance","elements","not","filter","validate","ffValidationError","showErrorMessages","scrollToFirstError","step","maybeUpdateDynamicLabels","autoScroll","formTop","top","Array","setp","scrollTop","ff_disable_step_scroll","ff_scroll_top_offset","delay","animate","inlineCssObj","left","right","saveStepData","ff_disable_auto_step","$activeStepDom","childDomCounts","hiddenDomCounts","click","$inputs","parents","prepend","active_step","serialize","workStep","ref","refElement","separator","refValues","inputValue","replaceValue","maybeAutoSlider","autoSlider","maybeAction","count","timeout","ffTransitionTimeOut","calculationFields","repeaterTriggerCache","mexp","addToken","token","decimals","parseFloat","a","b","findAll","regexPattern","sourceString","output","regexPatternWithGlobal","exec","input","doCalculation","$field","formula","regEx","matches","replaces","itemKey","inputName","itemValue","getDataCalcValue","tableName","$targetTable","calculatedValue","eval","isNaN","decimal","isInteger","selector","selectedItems","indexItem","eachItemValue","initNumberCalculations"],"mappings":"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","file":"/js/fluentform-advanced.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1484);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 197bb7ce9088f86892fc","import initNetPromoter from \"./Pro/dom-net-promoter\";\nimport {initRepeatButtons, initRepeater} from './Pro/dom-repeat';\nimport ratingDom from './Pro/dom-rating';\nimport formConditional from \"./Pro/form-conditionals\";\nimport fileUploader from './Pro/file-uploader';\nimport formSlider from './Pro/slider';\nimport calculation from './Pro/calculations'\n\njQuery(document).ready(function () {\n    (function ($) {\n        /*\n        * Common Functions for All The Forms\n         */\n        initNetPromoter($);\n        initRepeatButtons($);\n        ratingDom($);\n\n        /*\n        * Form Specific Actions\n         */\n        var $allForms = $('.frm-fluent-form');\n        $.each($allForms, function (formInDex, formItem) {\n            let $theForm = $(formItem);\n            const formInstanceSelector = $theForm.attr('data-form_instance');\n            const form = window['fluent_form_' + formInstanceSelector];\n            if (!form) {\n                console.log('No Fluent form JS vars found!');\n                return;\n            }\n            const formId = form.form_id_selector;\n            const formSelector = '.' + form.form_instance;\n\n            const sliderInstance = formSlider($, $theForm, window.fluentFormVars, formSelector);\n\n            /*\n            * Normals\n             */\n            fileUploader($, $theForm, form, window.fluentFormVars, formSelector);\n            initRepeater($theForm);\n            formConditional($, $theForm, form, window.fluentFormVars);\n            sliderInstance.init();\n            calculation($, $theForm);\n\n            $theForm.on('update_slider', function (e, data) {\n                sliderInstance.updateSlider(\n                    data.goBackToStep,\n                    data.animDuration,\n                    data.isScrollTop,\n                    data.actionType\n                );\n            });\n\n            /*\n            * Extras\n             */\n            jQuery(document).on('reInitExtras', formSelector, function () {\n                $theForm = jQuery('form'+formSelector);\n                let formSliderInstance = formSlider(jQuery, $theForm, window.fluentFormVars, formSelector);\n                formSliderInstance.init();\n                initRepeater($theForm);\n                formConditional($, $theForm, form);\n                calculation($, $theForm);\n            });\n\n        });\n    })(jQuery);\n});\n\n// Polyfill for startsWith and endsWith\n(function (sp) {\n    if (!sp.startsWith)\n        sp.startsWith = function (str) {\n            return !!(str && this) && !this.lastIndexOf(str, 0)\n        }\n    if (!sp.endsWith)\n        sp.endsWith = function (str) {\n            var offset = str && this ? this.length - str.length : -1\n            return offset >= 0 && this.lastIndexOf(str, offset) === offset\n        }\n})(String.prototype);\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/fluentform-advanced.js","const initNetPromoter = function ($) {\n    /**\n     * Rating element\n     */\n    let netPromoterDoms = $(\".jss-ff-el-net-promoter\");\n\n    if(!netPromoterDoms.length) {\n        return;\n    }\n\n    $.each(netPromoterDoms, (index, netPromoterDom) => {\n        let $netPromoterDoms = $(netPromoterDom);\n        // Default selected icons\n        // $netPromoterDoms.find(\"label.active\").prevAll().addClass(\"active\");\n        $netPromoterDoms.on('click', 'label', function(e) {\n            var $this = $(this);\n            /**\n             * Mark active to all previous and currently hovered elements\n             * And mark inactive to the next ones!\n             */\n            $this.addClass(\"active\");\n            $this.prevAll().removeClass(\"active\");\n            $this.nextAll().removeClass(\"active\");\n        })\n    });\n};\n\nexport default initNetPromoter;\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/dom-net-promoter.js","const initRepeatButtons = function ($) {\n    var repeat = $('.fluentform .js-repeat'); // this is the old version\n    $.each(repeat, (index, repeatItem) => {\n        let $repeatItem = $(repeatItem);\n        let repeatCols = $repeatItem.find('.ff-t-cell').length;\n\n        if (repeatCols > 1) {\n            let containerHeight = $repeatItem.find('.ff-el-group').height();\n            let elementHeight = $repeatItem.find('.ff-el-group').find('.ff-el-input--content').height();\n            let marginTop = containerHeight - elementHeight;\n            $repeatItem.find('.js-repeat-buttons').css('margin-top', marginTop + 'px');\n        }\n\n        let elementInputHeight = $repeatItem.find('.ff-el-group').find('.ff-el-input--content .ff-el-form-control').outerHeight();\n        $repeatItem.find('.ff-el-repeat-buttons').height(elementInputHeight);\n    });\n};\n\nconst registerRepeaterButtonsOldVersion = function ($theForm) {\n    $theForm.on('click', '.js-repeat .repeat-plus', function (e) {\n        let btnPlus = jQuery(this);\n        let repeatParent = btnPlus.closest('.ff-el-repeat');\n        let maxRepeat = parseInt(repeatParent.data('max_repeat'));\n        let currentRepeatItems = repeatParent.find('.ff-t-cell:first-child .ff-el-input--content > input').length;\n\n        if (maxRepeat && maxRepeat <= currentRepeatItems) {\n            return;\n        }\n\n        if (maxRepeat && maxRepeat - currentRepeatItems == 1) {\n            repeatParent.find('.repeat-plus').hide();\n        }\n\n        let btnSet = btnPlus.closest('div');\n        let index = btnSet.index();\n        let itemLength = btnPlus\n            .closest('.ff-el-input--content')\n            .find('.ff-t-cell').length;\n\n        btnPlus\n            .closest('.ff-el-input--content')\n            .find('.ff-t-cell')\n            .each(function (i, div) {\n                var el = jQuery(this).find('.ff-el-form-control:last-child');\n                var tabIndex = el.attr('tabindex');\n                var cloned = el.clone();\n                var newId = 'ffrpt-' + (new Date()).getTime() + i;\n\n                var itemProp = {\n                    value: '',\n                    id: newId\n                };\n\n                if (tabIndex) {\n                    itemProp.tabIndex = parseInt(tabIndex) + itemLength;\n                }\n\n                cloned.prop(itemProp);\n                cloned.insertAfter(el);\n            });\n\n        btnSet.clone().insertAfter(btnSet);\n        btnPlus\n            .closest('.ff-el-input--content')\n            .find('.ff-t-cell').eq(0)\n            .find(`input:eq(${index + 1})`).focus();\n    });\n    $theForm.on('click', '.js-repeat .repeat-minus', function (e) {\n        let isDeleted = false;\n        let btnMinus = jQuery(this);\n        let btnSet = btnMinus.closest('div');\n\n        let repeatParent = btnMinus.closest('.ff-el-repeat');\n        repeatParent.find('.repeat-plus').show();\n\n        btnMinus\n            .closest('.ff-el-input--content')\n            .find('.ff-t-cell')\n            .each(function () {\n                var index = btnSet.index();\n                var el = jQuery(this).find('.ff-el-form-control:eq(' + index + ')');\n                if (btnSet.siblings().length) {\n                    isDeleted = el.remove().length;\n                }\n            });\n        isDeleted && btnSet.remove();\n    });\n};\n\nconst registerRepeaterHandler = function ($theForm) {\n    $theForm.on('click', '.js-repeater .repeat-plus', function (e) {\n        let $btnPlus = jQuery(this);\n        let $table = $btnPlus.closest('table');\n        let $tr = $btnPlus.closest('tr');\n        let maxRepeat = parseInt($table.attr('data-max_repeat'));\n\n        let existingCount = $table.find('tbody tr').length;\n\n        if(maxRepeat && existingCount == maxRepeat) {\n            $table.addClass('repeat-maxed');\n            return;\n        }\n\n        var $freshCopy = $tr.clone();\n\n        $freshCopy.find('td').each(function (i, td) {\n            var el = jQuery(this).find('.ff-el-form-control:last-child');\n            var tabIndex = el.attr('tabindex');\n            var newId = 'ffrpt-' + (new Date()).getTime() + i;\n            let oldDataName = el.data('name');\n            var itemProp = {\n                value: '',\n                id: newId\n            };\n\n            if(oldDataName) {\n\n            }\n\n            if (tabIndex) {\n            //    itemProp.tabIndex = parseInt(tabIndex) + itemLength;\n            }\n            el.prop(itemProp);\n        });\n        $freshCopy.insertAfter($tr);\n\n        // Now let's fix the name\n        let rootName = $table.attr('data-root_name');\n        let firstTabIndex = 0;\n        $table.find('tbody tr').each(function (i, td) {\n            var els = jQuery(this).find('.ff-el-form-control');\n            els.each(function (index, el) {\n                let $el = jQuery(el);\n                if(i == 0) {\n                    firstTabIndex = $el.attr('tabindex');\n                }\n                $el.prop({\n                    'name': rootName+'['+i+'][]'\n                });\n                $el.attr('data-name',  rootName+'_'+index+'_'+i);\n                if(firstTabIndex) {\n                    $el.attr('tabindex',  firstTabIndex);\n                }\n            });\n        });\n\n        $freshCopy.find('.ff-el-form-control')[0].focus();\n\n        $table.trigger('repeat_change');\n\n\n        if(maxRepeat && existingCount+1 == maxRepeat) {\n            $table.addClass('repeat-maxed');\n        }\n    });\n\n    $theForm.on('click', '.js-repeater .repeat-minus', function (e) {\n        let $btnMinus = jQuery(this);\n        let $table = $btnMinus.closest('table');\n        let existingCount = $table.find('tbody tr').length;\n        if(existingCount == 1) {\n            return;\n        }\n\n        $btnMinus.closest('tr').remove();\n        $table.removeClass('repeat-maxed');\n\n        // Now let's fix the name\n        let rootName = $table.attr('data-root_name');\n        $table.find('tbody tr').each(function (i, td) {\n            var els = jQuery(this).find('.ff-el-form-control');\n            els.each(function (index, el) {\n                jQuery(el).prop({\n                    'name': rootName + '[' + i + '][]'\n                });\n            });\n        });\n        $table.trigger('repeat_change');\n    });\n\n\n};\n\nconst initRepeater = function($theForm) {\n    registerRepeaterButtonsOldVersion($theForm);\n    registerRepeaterHandler($theForm);\n};\n\nexport {initRepeatButtons, initRepeater};\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/dom-repeat.js","export default function ($) {\n    /**\n     * Rating element\n     */\n    let ratingDoms = $(\".jss-ff-el-ratings\");\n\n    if(!ratingDoms.length) {\n        return;\n    }\n\n    $.each(ratingDoms, (index, ratingDom) => {\n        let $ratingDom = $(ratingDom);\n        // Default selected icons\n        $ratingDom.find(\"label.active\").prevAll().addClass(\"active\");\n        $ratingDom.on('mouseenter', 'label', function(e) {\n            var $this = $(this);\n            var targetId = $this.find('input').attr('id');\n            var ratingTextSelector = \"[data-id=\"+ targetId +\"]\";\n\n            /**\n             * Mark active to all previous and currently hovered elements\n             * And mark inactive to the next ones!\n             */\n            $this.addClass(\"active\");\n            $this.prevAll().addClass(\"active\");\n            $this.nextAll().removeClass(\"active\");\n\n            $this\n                .closest(\".ff-el-input--content\")\n                .find(\".ff-el-rating-text\")\n                .css('display', 'none');\n\n            $this\n                .closest(\".ff-el-input--content\")\n                .find(ratingTextSelector)\n                .css(\"display\", \"inline-block\");\n        })\n            // When clicked on the icon\n            .on('click', 'label', function(e) {\n                var $this = $(this);\n                var $icon = $this.find(\".jss-ff-svg\");\n\n                $icon.addClass('scale');\n                $icon.addClass('scalling');\n\n                setTimeout( _ => {\n                    $icon.removeClass('scalling');\n                    $icon.removeClass('scale');\n                }, 150);\n            })\n            // When mouse leaved from the rating icons\n            .on('mouseleave', function(e) {\n                var $this = $(this);\n                var targetId = $this.find(\"input:checked\").attr(\"id\");\n                var ratingTextSelector = \"[data-id=\" + targetId + \"]\";\n                var checkedStar = $this.find(\"input:checked\").parent(\"label\");\n\n                /**\n                 * Only checked item's prior elements will be marked\n                 * And rest will be unmarked\n                 */\n                if (!checkedStar.length) {\n                    $this.find('label').removeClass('active');\n                } else {\n                    checkedStar.addClass(\"active\");\n                    checkedStar.prevAll().addClass(\"active\");\n                    checkedStar.nextAll().removeClass(\"active\");\n                }\n\n                $this\n                    .closest(\".ff-el-input--content\")\n                    .find(\".ff-el-rating-text\")\n                    .css(\"display\", \"none\");\n\n                $this\n                    .closest(\".ff-el-input--content\")\n                    .find(ratingTextSelector)\n                    .css(\"display\", \"inline-block\");\n            });\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/dom-rating.js","import ConditionApp from \"./_ConditionClass\";\n\nconst formConditional = function ($, $theForm, form) {\n    /**\n     * Container to store all conditional\n     *  logics recieved from the server\n     *\n     * @type {Object}\n     */\n    let formSelector = '.' + form.form_instance;\n\n    const formCondition = function () {\n\n        const watchableFields = {};\n\n        let formData = {};\n\n        const getTheForm = function () {\n            return $(formSelector);\n        };\n\n        /**\n         * Register all the required handlers\n         * for elements those, who have conditions\n         *\n         * @return void\n         */\n        const init = function () {\n            if (!form.conditionals) {\n                return;\n            }\n            $.each(form.conditionals, function (fieldName, field) {\n                if (!fieldName) {\n                    return;\n                }\n                $.each(field.conditions, function (index, condition) {\n                    let el = getElement(condition.field);\n                    watchableFields[el.prop('name')] = el;\n                });\n            });\n\n            formData = getFormData();\n            const conditionAppInstance = new ConditionApp(form.conditionals, formData);\n\n            $.each(watchableFields, (name, el) => {\n                el.on('change', () => {\n                    formData = getFormData();\n                    conditionAppInstance.setFormData(formData);\n                    hideShowElements(conditionAppInstance.getCalculatedStatuses());\n                });\n            });\n\n            hideShowElements(conditionAppInstance.getCalculatedStatuses());\n        };\n\n        const hideShowElements = function (items) {\n            $.each(items, (itemName, status) => {\n                const el = getElement(itemName);\n                let $parent = el.closest('.has-conditions');\n                if (status) {\n                    setTimeout(function () {\n                        $parent.addClass('ff_cond_v');\n                    }, 100);\n\n                    $parent.removeClass('ff_excluded')\n                        .slideDown(200);\n\n                } else {\n                    setTimeout(function () {\n                        $parent.removeClass('ff_cond_v');\n                    }, 100);\n                    $parent\n                        .addClass('ff_excluded')\n                        .slideUp(200);\n                }\n            });\n        };\n\n        const getFormData = function () {\n            const data = {};\n            $.each(watchableFields, (name, el) => {\n                let type = el.prop('type') || el.attr('data-type');\n                if (type == 'radio') {\n                    data[name] = '';\n                    el.each((index, item) => {\n                        if ($(item).is(':checked')) {\n                            data[name] = $(item).val();\n                        }\n                    });\n                } else if (type == 'checkbox') {\n                    name = name.replace('[]', '');\n                    data[name] = [];\n                    el.each((index, item) => {\n                        if ($(item).is(':checked')) {\n                            data[name].push($(item).val());\n                        }\n                    });\n                } else if (type == 'select-multiple') {\n                    name = name.replace('[]', '');\n                    let val = el.val();\n                    if (val) {\n                        data[name] = val;\n                    } else {\n                        data[name] = [];\n                    }\n                } else {\n                    data[name] = el.val();\n                }\n            });\n            return data;\n        };\n\n        /**\n         * Resolve a dom element as jQuery object\n         *\n         * @param  string name\n         * @return jQuery instance\n         */\n        const getElement = function (name) {\n            let $theform = getTheForm();\n            var el = $(\"[data-name='\" + name + \"']\", $theform);\n            el = el.length ? el : $(\"[name='\" + name + \"']\", $theform);\n            return el.length ? el : $(\"[name='\" + name + \"[]']\", $theform);\n        };\n\n        return {init};\n    };\n    formCondition().init();\n};\n\nexport default formConditional;\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/form-conditionals.js","class ConditionApp {\n\n    constructor(fields, formData) {\n        this.fields = fields;\n        this.formData = formData;\n        this.counter = 0;\n        this.field_statues = {};\n    }\n\n    setFields(fields) {\n        this.fields = fields;\n    }\n\n    setFormData(data) {\n        this.formData = data;\n    }\n\n    getCalculatedStatuses() {\n        for (const key of Object.keys(this.fields)) {\n            let item = this.fields[key];\n            this.field_statues[key] = this.evaluate(item, key);\n        }\n        return this.field_statues;\n    }\n\n    evaluate(item, key) {\n        this.counter++;\n        let type = item.type;\n        let result = 1;\n        if (type == 'any') {\n            result = 0;\n        }\n        item.conditions.forEach(condition => {\n            let evalValue = this.getItemEvaluateValue(condition, this.formData[condition.field]);\n\n            if(evalValue && this.fields[condition.field] && condition.field != key) {\n                evalValue = this.evaluate(this.fields[condition.field], condition.field);\n            }\n\n            if (type == 'any') {\n                if (evalValue) {\n                    result = 1;\n                }\n            } else {\n                // For All\n                if (!evalValue && result) {\n                    result = false;\n                }\n            }\n        });\n        return result == 1;\n    }\n\n    getItemEvaluateValue(item, val) {\n        if (item.operator == '=') {\n            // this value can be array or string\n            if(typeof val == 'object') {\n                return val.indexOf(item.value) != -1;\n            }\n            return val == item.value;\n        } else if (item.operator == '!=') {\n            if(typeof val == 'object') {\n                return val.indexOf(item.value) == -1;\n            }\n            return val != item.value;\n        } else if (item.operator == '>') {\n            return val && val > Number(item.value);\n        } else if (item.operator == '<') {\n            return val && val < Number(item.value);\n        } else if (item.operator == '>=') {\n            return val && val >= Number(item.value);\n        } else if (item.operator == '<=') {\n            return val && val <= Number(item.value);\n        } else if (item.operator == 'startsWith') {\n            return val.startsWith(item.value);\n        } else if (item.operator == 'endsWith') {\n            return val.endsWith(item.value);\n        } else if (item.operator == 'contains') {\n            return val.indexOf(item.value) != -1;\n        } else if (item.operator == 'doNotContains') {\n            return val.indexOf(item.value) == -1;\n        }\n        return false;\n    }\n}\n\nexport default ConditionApp;\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/_ConditionClass.js","export default function ($, $form, form, fluentFormVars, formSelector) {\n    /**\n     * Register file uploaders\n     * @return {void}\n     */\n    var initUploader = function () {\n        $form.find('input[type=\"file\"]').each(function (key, el) {\n            var element = $(this),\n                uploadedList;\n\n            // Set files thumbnail list container\n            uploadedList = $('<div/>', {\n                class: 'ff-uploaded-list',\n                style: 'font-size:12px; margin-top: 15px;'\n            });\n            element.closest('div').append(uploadedList);\n\n            // Set maximum allowed files count protection\n            var rules = form.rules[element.prop('name')];\n            var maxFiles = rules['max_file_count']['value'];\n            if ('max_file_count' in rules) {\n                rules['max_file_count']['remaining'] = Number(maxFiles);\n            }\n\n            // Set html accept property for file types\n            var acceptedFileTypes = '';\n            if ('allowed_file_types' in rules) {\n                acceptedFileTypes = rules.allowed_file_types.value.join('|');\n                element.prop('accept', '.' + acceptedFileTypes.replace(/\\|/g, ',.'));\n            } else {\n                acceptedFileTypes = rules.allowed_image_types.value.join('|');\n                if (acceptedFileTypes) {\n                    element.prop('accept', '.' + acceptedFileTypes.replace(/\\|/g, ',.'));\n                } else {\n                    element.prop('accept', 'image/*');\n                }\n            }\n\n            function showUploadError(msg) {\n                let elName = element.prop('name');\n                $form.trigger('show_element_error', {\n                    element: elName,\n                    message: msg\n                });\n            }\n\n            // Init the uploader\n            element.fileupload({\n                dataType: 'json',\n                url: fluentFormVars.ajaxUrl + '?action=fluentform_file_upload&formId=' + form.id,\n                change: function (e, data) {\n                    if (!data || !data.files || !data.files.length) {\n                        return;\n                    }\n\n                    $form.find('.ff-upload-preview-elem').remove();\n                    // return true;\n                    if ('max_file_count' in rules) {\n                        $(formSelector + '_errors').empty();\n                        $(this).closest('div').find('.error').html('');\n                        var remaining = rules['max_file_count']['remaining'];\n                        if (!remaining || data.files.length > remaining) {\n                            var msg = 'Maximum 1 file is allowed!';\n                            msg = maxFiles > 1 ? 'Maximum ' + maxFiles + ' files are allowed!' : msg;\n                            if (rules.max_file_count && rules.max_file_count.message) {\n                                msg = rules.max_file_count.message;\n                            }\n                            showUploadError(msg);\n                            return false;\n                        }\n                    }\n\n                    var validationErrors = validateFile(\n                        data.files[0], form.rules[element.prop('name')]\n                    );\n\n                    if (validationErrors.length) {\n                        showUploadError(validationErrors.join(', '));\n                        return false;\n                    }\n\n                    return true;\n                },\n                add: function (e, data) {\n                    var previewContainer = $('<div/>', {\n                        class: 'ff-upload-preview'\n                    });\n                    data.context = previewContainer;\n\n                    var previewThumb = $('<div/>', {\n                        class: 'ff-upload-thumb'\n                    });\n\n                    var previewDetails = $('<div/>', {\n                        class: 'ff-upload-details'\n                    });\n\n                    var thumb = $('<div/>', {\n                        class: 'ff-upload-preview-img',\n                        style: `background-image: url('${getThumbnail(data.files[0])}');`\n                    });\n\n                    var errorInline = $('<div>', {\n                        class: 'ff-upload-error',\n                        style: 'color:red;'\n                    });\n\n                    var fileProgress = $('<span/>', {\n                        html: fluentFormVars.upload_start_txt,\n                        class: 'ff-upload-progress-inline-text ff-inline-block'\n                    });\n\n                    // Set inline progress bar\n                    var progressBarInline = $(`\n\t\t\t\t\t\t\t\t\t<div class=\"ff-upload-progress-inline ff-el-progress\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ff-el-progress-bar\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`);\n\n                    var fileName = $('<div/>', {\n                        class: 'ff-upload-filename',\n                        html: data.files[0].name\n                    });\n\n                    var removeBtn = $('<span/>', {\n                        'data-href': '#',\n                        'html': '&times;',\n                        'class': 'ff-upload-remove'\n                    });\n\n                    var fileSize = $('<div>', {\n                        class: 'ff-upload-filesize ff-inline-block',\n                        html: getFileSize(data.files[0].size)\n                    });\n\n                    previewThumb.append(thumb);\n                    previewDetails.append(fileName, progressBarInline, fileProgress, fileSize, errorInline, removeBtn);\n                    previewContainer.append(previewThumb, previewDetails);\n\n                    uploadedList.append(previewContainer);\n\n                    // set width for filename container\n                    // filename larger than it's container will truncate\n                    fileName.css({\n                        maxWidth: data.context.width()\n                            - 91 // width of left image area\n                            + 'px'\n                    });\n                    data.submit();\n                    data.context.addClass('ff_uploading');\n                },\n                progress: function (e, data) {\n                    var progress = parseInt(data.loaded / data.total * 100, 10);\n                    data.context\n                        .find('.ff-el-progress-bar')\n                        .css('width', progress + '%');\n                    data.context\n                        .find('.ff-upload-progress-inline-text')\n                        .text(fluentFormVars.uploading_txt);\n                },\n                done: function (e, data) {\n                    data.context.removeClass('ff_uploading');\n                    if (data.result && 'data' in data.result && 'files' in data.result.data) {\n                        if ('error' in data.result.data.files[0]) {\n                            // Error given by WP (wp_handle_upload)\n                            showUploadError('Upload Error: ' + data.result.data.files[0].error);\n                            data.context.remove();\n                        } else {\n                            data.context\n                                .find('.ff-upload-progress-inline-text')\n                                .text(fluentFormVars.upload_completed_txt);\n\n                            rules['max_file_count']['remaining'] -= 1;\n                            data.context.css('border', '1px solid #6f757d');\n                            data.context.attr('data-src', data.result.data.files[0].url);\n                            data.context.find('.ff-upload-remove').attr(\n                                'data-href', data.result.data.files[0].file\n                            );\n                        }\n                    } else {\n                        // For debugging purpose to catch devlopment erros,\n                        // this check might not be needing in production.\n                        let message = 'Sorry! The upload failed for some unknown reason.';\n\n                        if (data.messages) {\n                            let keys = Object.keys(data.messages);\n                            if (keys.length) {\n                                message = data.messages[keys[0]];\n                            }\n                        }\n                        showUploadError(message);\n                        data.context.remove();\n                    }\n                },\n                fail: function (e, data) {\n                    var errors = [];\n                    data.context.remove();\n                    if (data.jqXHR.responseJSON && data.jqXHR.responseJSON.data && data.jqXHR.responseJSON.data.errors) {\n                        $.each(data.jqXHR.responseJSON.data.errors, function (key, error) {\n                            if (typeof error == 'object') {\n                                $.each(error, function (i, msg) {\n                                    errors.push(msg);\n                                });\n                            } else {\n                                errors.push(error);\n                            }\n                        });\n                    } else if (data.jqXHR.responseText) {\n                        errors.push(data.jqXHR.responseText);\n                    } else {\n                        errors.push('Something is wrong when uploading the file! Please try again');\n                    }\n                    showUploadError(errors.join(', '));\n                }\n            });\n        });\n    };\n\n    /**\n     * Get thumbnail image for file upload preview\n     * @param  {file} file\n     * @return {mixed}\n     */\n    var getThumbnail = function (file) {\n        if (!!file.type.match('image')) {\n            return URL.createObjectURL(file);\n        }\n\n        var canvas = document.createElement('canvas');\n        canvas.width = 60;\n        canvas.height = 60;\n        canvas.style.zIndex = 8;\n        canvas.style.position = \"absolute\";\n        canvas.style.border = \"1px solid\";\n\n        var ctx = canvas.getContext(\"2d\");\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.2)\";\n        ctx.fillRect(0, 0, 60, 60);\n        ctx.font = \"13px Arial\";\n        ctx.fillStyle = \"white\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(file.type.substr(file.type.indexOf('/') + 1), 30, 30, 60);\n        return canvas.toDataURL();\n    };\n\n    /**\n     * Get formatted file size to show in preview\n     * @param  {int} size\n     * @return {string}\n     */\n    var getFileSize = function returnFileSize(size) {\n        if (size < 1024) {\n            return size + 'bytes';\n        } else if (size >= 1024 && size <= 1048576) {\n            return (size / 1024).toFixed(1) + 'KB';\n        } else if (size > 1048576) {\n            return (size / 1048576).toFixed(1) + 'MB';\n        }\n    };\n\n    /**\n     * Register event handler to delete uploaded file\n     * @return {void}\n     */\n    var registerFileRemove = function () {\n        $('.ff-uploaded-list').on('click', '.ff-upload-remove', function (e) {\n            e.preventDefault();\n            var elFiles,\n                $this = $(this),\n                parent = $this.closest('.ff-uploaded-list'),\n                filePath = $this.attr('data-href');\n            if (filePath == '#') {\n                $this.closest('.ff-upload-preview').remove();\n                if (!parent.find('.ff-upload-preview').length) {\n                    parent.siblings('.ff-upload-progress').addClass('ff-hidden');\n                }\n            } else {\n                $.post(fluentFormVars.ajaxUrl, {\n                    path: filePath,\n                    action: 'fluentform_delete_uploaded_file'\n                })\n                    .then(function (response) {\n                        var element = $this.closest('.ff-el-input--content').find('input');\n                        var rules = form.rules[element.prop('name')];\n                        rules['max_file_count']['remaining'] += 1;\n                        $this.closest('.ff-upload-preview').remove();\n                        if (!parent.find('.ff-upload-preview').length) {\n                            parent.siblings('.ff-upload-progress').addClass('ff-hidden');\n                        }\n                    });\n            }\n        });\n    };\n\n    /**\n     * Validate a file before uploading\n     * @param  {file}\n     * @return {array}\n     */\n    var validateFile = function (file, rules) {\n        // return [];\n        var validationErrors = [];\n\n        // Accepted file types validation\n        var fileTypes = '';\n        var fileTypesMessage = '';\n        if ('allowed_file_types' in rules) {\n            fileTypes = rules['allowed_file_types']['value'];\n            fileTypesMessage = rules['allowed_file_types']['message'];\n        } else if ('allowed_image_types' in rules) {\n            fileTypes = rules['allowed_image_types']['value'];\n            fileTypesMessage = rules['allowed_image_types']['message'];\n        }\n\n        if (fileTypes) {\n            var acceptFileTypes = new RegExp('(' + fileTypes.join('|') + ')', 'i');\n            var fileExt = file['name'].split('.').pop();\n            fileExt = fileExt.toLowerCase();\n            if (!acceptFileTypes.test(fileExt)) {\n                validationErrors.push(fileTypesMessage);\n            }\n        }\n\n        // Maximum file size validation\n        if ('max_file_size' in rules && file['size'] > rules['max_file_size']['value']) {\n            validationErrors.push(rules['max_file_size']['message']);\n        }\n\n        return validationErrors;\n    };\n\n\n    initUploader();\n    registerFileRemove();\n};\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/file-uploader.js","export default function ($, $theForm, fluentFormVars, formSelector) {\n    /**\n     * Active form step\n     * @type {Number}\n     */\n    var activeStep = 0;\n\n    fluentFormVars.stepAnimationDuration = parseInt(fluentFormVars.stepAnimationDuration);\n    \n    fluentFormVars.enable_step_data_persistency = $theForm.find(\n        '.ff-step-container'\n    ).attr('data-enable_step_data_persistency');\n\n    if(fluentFormVars.enable_step_data_persistency == 'yes') {\n        fluentFormVars.enable_step_page_resume = $theForm.find(\n            '.ff-step-container'\n        ).attr('data-enable_step_page_resume');\n    }\n\n    var isRtl = !!window.fluentFormVars.is_rtl;\n\n    var isPopulatingStepData = false;\n\n    /**\n     * Remove prev button from first step\n     * @return void\n     */\n    var removePrevFromFirstFirstStep = function () {\n        $theForm\n            .find('.fluentform-step:first')\n            .find('.step-nav [data-action=\"prev\"]')\n            .remove();\n    };\n\n    var getFormInstance = function () {\n        return window.fluentFormApp($theForm);\n    };\n\n    var initFormWithSavedState = function() {\n        if (fluentFormVars.enable_step_data_persistency == 'no') return;\n        \n        jQuery(document).ready(e => {\n            jQuery.getJSON(fluentFormVars.ajaxUrl, {\n                form_id: $theForm.data('form_id'),\n                action: 'fluentform_step_form_get_data'\n            }).then(data => {\n                if (data) {\n                    populateFormDataAndSetActiveStep(data);\n                }\n            });\n        });\n    };\n\n    var populateFormDataAndSetActiveStep = function({response, step_completed}) {\n        jQuery.each(response, (key, value) => {\n            if (!value) return;\n\n            let type = Object.prototype.toString.call(value);\n\n            if (type === '[object Object]') {\n                let $el = jQuery(`[data-name=${key}]`);\n                \n                if ($el.length && $el.attr('data-type') === 'tabular-element') {\n                    // Tabular Grid\n                    jQuery.each(value, (row, columns) => {\n                        let $checkboxes = jQuery(`[name=\"${key}[${row}]\\\\[\\\\]\"]`);\n                        jQuery.each($checkboxes, (i, cbox) => {\n                            if (jQuery.inArray($(cbox).val(), columns) != -1) {\n                                $(cbox).prop('checked', true).change();\n                            }\n                        });\n                    });\n                } else if ($el.attr('data-type') === 'chained-select') {\n                    // Chained Select\n                    let data = {\n                        meta_key: $el.find('select:first').attr('data-meta_key'),\n                        form_id: $el.closest('form').attr('data-form_id'),\n                        action: 'fluentform_get_chained_select_options',\n                        'filter_options': 'all',\n                        'keys': value\n                    };\n                    jQuery.getJSON(fluentFormVars.ajaxUrl, data).then(response => {\n                        jQuery.each(response, (key, options) => {\n                            let $select = $el.find(`select[data-key=${key}]`);\n                            \n                            if ($select.attr('data-index') != 0) {\n                                jQuery.each(options, (k, val) => {\n                                    $select.append(\n                                        jQuery('<option />', { value: val, text: val })\n                                    );\n                                });\n                            }\n\n                            $select.attr('disabled', false).val(value[key]);\n                        });\n                    });\n                } else {\n                    // Names, Address e.t.c. fields\n                    jQuery.each(value, (k, v) => {\n                        jQuery(`[name=\"${key}[${k}]\"]`).val(v).change();\n                    });\n                }\n            } else if (type === '[object Array]') {\n                let $el = jQuery(`[name=${key}]`);\n                $el = $el.length ? $el : jQuery(`[data-name=${key}]`);\n                $el = $el.length ? $el : jQuery(`[name=${key}\\\\[\\\\]]`);\n                if ($el.prop('multiple')) {\n                    $el.val(value).change();\n                } else if ($el.attr('data-type') === 'repeater_field') {\n                    // Repeater Field\n                    let $tbody = $el.find('tbody');\n                    let elName = $el.attr('data-name');\n\n                    jQuery.each(value, (index, arr) => {\n                        if (index == 0) {\n                            $tbody.find('tr:first .ff-el-form-control').each((i, el) => {\n                                $(el).val(arr[i]).change();\n                            });\n                            return;\n                        }\n\n                        let $tr = $tbody.find('tr:last').clone().appendTo($tbody);\n                        $tr.find('.ff-el-form-control').each((i, el) => {\n                            let id = 'ffrpt-' + (new Date()).getTime() + i;\n                            $(el).attr({\n                                id: id,\n                                name: `${elName}[${index}][]`,\n                                value: arr[i]\n                            }).change();\n                        });\n                    });\n                } else {\n                    // Checkbox Groups\n                    $el.each((i, $elem) => {\n                        if (jQuery.inArray($($elem).val(), value) != -1) {\n                            $($elem).prop('checked', true).change();\n                        }\n                    });\n                }\n            } else {\n                // Others\n                let $el = jQuery(`[name=${key}]`);\n                if ($el.prop('type') === 'radio' || $el.prop('type') === 'checkbox') {\n                    jQuery(`[name=${key}][value=${value}]`).prop('checked', true).change();\n                } else {\n                    $el.val(value).change();\n                }\n            }\n        });\n\n        isPopulatingStepData = true;\n        if (fluentFormVars.enable_step_page_resume == 'yes') {\n            updateSlider(step_completed, fluentFormVars.stepAnimationDuration, true);\n        };\n        isPopulatingStepData = false;\n    };\n\n    /**\n     * Register event handlers for form\n     * steps slider initialization\n     *\n     * @return void\n     */\n    var initStepSlider = function () {\n        const stepsWrapper = $theForm.find('.ff-step-body');\n        const formSteps = $theForm.find('.fluentform-step');\n        const totalSteps = formSteps.length;\n        const stepTitles = $theForm.find('.ff-step-titles li');\n\n        stepsWrapper.css({width: (100 * totalSteps) + '%'});\n        formSteps.css({width: (100 / totalSteps) + '%'});\n\n        $(formSteps[activeStep]).addClass('active');\n        $(stepTitles[activeStep]).addClass('active');\n\n        // submit button should only be printed on last step\n        if (formSteps.length && !formSteps.last().hasClass('active')) {\n            $theForm.find('button[type=\"submit\"]').css('display', 'none');\n        }\n\n        stepProgressBarHandle({activeStep, totalSteps});\n\n        registerStepNavigators(fluentFormVars.stepAnimationDuration);\n    };\n\n    /**\n     * Action occurs on step change/form load\n     * @param  {object} stepData\n     * @return {void}\n     */\n    var stepProgressBarHandle = function (stepData) {\n        if ($theForm.find('.ff-el-progress').length) {\n            var {totalSteps, activeStep} = stepData;\n            var completeness = (100 / totalSteps * (activeStep + 1));\n            var stepTitles = $theForm.find('.ff-el-progress-title li');\n            var progressBar = $theForm.find('.ff-step-header .ff-el-progress-bar');\n            var span = progressBar.find('span');\n            // progress bar completeness\n            progressBar.css({\n                width: completeness + '%'\n            });\n            if (completeness) {\n                progressBar.append(span.text(parseInt(completeness) + '%'))\n            } else {\n                span.empty();\n            }\n            // $theForm.find('.ff-el-progress-status').text(`${activeStep} out of ${totalSteps} Completed`);\n            let stepText = fluentFormVars.step_text;\n\n            let stepTitle = $(stepTitles[activeStep]).text();\n            stepText = stepText\n                .replace('%activeStep%', activeStep + 1)\n                .replace('%totalStep%', totalSteps)\n                .replace('%stepTitle%', stepTitle);\n\n            $theForm.find('.ff-el-progress-status').html(stepText);\n            stepTitles.css('display', 'none');\n            $(stepTitles[activeStep]).css('display', 'inline');\n        }\n    };\n\n    /**\n     * Register event handlers for form\n     * steps to move forward or backward\n     *\n     * @return void\n     */\n    var registerStepNavigators = function (animDuration) {\n\n        $(document).on('keydown', formSelector + ' .fluentform-step > .step-nav button', function (e) {\n            if (e.which == 9) {\n                if ($(this).data('action') == 'next') {\n                    e.preventDefault();\n                }\n            }\n        });\n\n        $(formSelector).on('click',  '.fluentform-step  .step-nav button', function (e) {\n            const btn = $(this).data('action');\n            let actionType = 'next';\n            let current = $(this).closest('.fluentform-step');\n            let formInstance = getFormInstance();\n\n            if (btn == 'next') {\n                try {\n                    var elements = current.find(':input').not(':button').filter(function (i, el) {\n                        return !$(el).closest('.has-conditions').hasClass('ff_excluded');\n                    });\n                    elements.length && formInstance.validate(elements);\n                    activeStep++;\n                } catch (e) {\n                    if (!(e instanceof window.ffValidationError)) {\n                        throw e;\n                    }\n                    formInstance.showErrorMessages(e.messages);\n                    formInstance.scrollToFirstError(350);\n                    return;\n                }\n                $theForm.trigger('ff_to_next_page', activeStep);\n\n                jQuery(document).trigger('ff_to_next_page', {\n                    step: activeStep,\n                    form: $theForm\n                });\n\n                maybeUpdateDynamicLabels(activeStep);\n\n            } else {\n                activeStep--;\n                actionType = 'prev';\n                $theForm.trigger('ff_to_prev_page', activeStep);\n                jQuery(document).trigger('ff_to_prev_page', {\n                    step: activeStep,\n                    form: $theForm\n                });\n            }\n\n            let autoScroll = $theForm.find('.ff-step-container').attr('data-disable_auto_focus') != 'yes';\n\n            updateSlider(activeStep, animDuration, autoScroll, actionType);\n        });\n    };\n\n    /**\n     * Update slider position in multisteps form\n     * @param  {int} goBackToStep\n     * @param  {int} animDuration\n     * @param  {bool} isScrollTop\n     * @return {void}\n     */\n    var updateSlider = function (goBackToStep, animDuration, isScrollTop = true, actionType = 'next') {\n        $('div' + formSelector + '_errors').empty();\n        activeStep = goBackToStep;\n\n        var stepsWrapper = $theForm.find('.ff-step-body');\n        var stepTitles = $theForm.find('.ff-step-titles li'),\n            formSteps = $theForm.find('.fluentform-step'),\n            totalSteps = formSteps.length,\n            formTop = $theForm.offset().top - (!!$('#wpadminbar') ? 32 : 0) - 20;\n\n        // change active step\n        formSteps.removeClass('active');\n        $(formSteps[activeStep]).addClass('active');\n\n        // change step title\n        stepTitles.removeClass('ff_active ff_completed');\n\n        $.each([...Array(activeStep).keys()], (setp) => {\n            $($(stepTitles[setp])).addClass('ff_completed');\n        });\n\n        $(stepTitles[activeStep]).addClass('ff_active');\n\n        // animate step on click next/prev\n        var scrollTop = function () {\n            if (window.ff_disable_step_scroll) {\n                return;\n            }\n\n            if (window.ff_scroll_top_offset) {\n                formTop = window.ff_scroll_top_offset;\n            }\n\n            $('html, body').delay(animDuration).animate({\n                scrollTop: formTop\n            }, animDuration, function (e) {\n                $('.fluentform-step.active', $theForm)\n                    .find(':input:visible:first')\n                    .focus();\n            });\n        };\n\n        let inlineCssObj = {\n            left: -(activeStep * 100) + '%'\n        };\n\n        if (isRtl) {\n            inlineCssObj = {\n                right: -(activeStep * 100) + '%'\n            };\n        }\n\n        stepsWrapper.animate(inlineCssObj, animDuration, () => isScrollTop && scrollTop());\n\n        // Fire ajax request to persist the step state/data\n        if (fluentFormVars.enable_step_data_persistency == 'yes' && !isPopulatingStepData) {\n            saveStepData($theForm, activeStep).then(response => {\n                console.log(response);\n            });\n        }\n\n        // update progressbar\n        stepProgressBarHandle({activeStep, totalSteps});\n\n        // now we have to check if there has any visible elements or not\n\n        // submit button should only be printed on last step\n        if (formSteps.last().hasClass('active')) {\n            $theForm.find('button[type=\"submit\"]').css('display', 'inline-block');\n            return;\n        } else {\n            $theForm.find('button[type=\"submit\"]').css('display', 'none');\n        }\n\n        if (!window.ff_disable_auto_step) {\n            let $activeStepDom = $theForm.find('.fluentform-step.active');\n            let childDomCounts = $theForm.find('.fluentform-step.active > div').length - 1;\n            let hiddenDomCounts = $theForm.find('.fluentform-step.active > .ff_excluded').length;\n\n            if ($theForm.find('.fluentform-step.active > .ff-t-container').length) {\n                childDomCounts -= $theForm.find('.fluentform-step.active > .ff-t-container').length;\n                childDomCounts += $theForm.find('.fluentform-step.active > .ff-t-container > .ff-t-cell > div').length;\n                hiddenDomCounts += $theForm.find('.fluentform-step.active > .ff-t-container > .ff-t-cell > .ff_excluded').length;\n\n                if($theForm.find('.fluentform-step.active > .ff-t-container.ff_excluded').length) {\n                    hiddenDomCounts -= $theForm.find('.fluentform-step.active > .ff-t-container.ff_excluded').length;\n                    hiddenDomCounts -= $theForm.find('.fluentform-step.active > .ff-t-container.ff_excluded > .ff-t-cell > .ff_excluded').length;\n                    hiddenDomCounts += $theForm.find('.fluentform-step.active > .ff-t-container.ff_excluded > .ff-t-cell > div').length;\n                }\n            }\n\n            if (childDomCounts == hiddenDomCounts) {\n                $activeStepDom.find('.step-nav button[data-action=' + actionType + ']').click();\n            }\n        }\n    };\n\n    var saveStepData = function($theForm, activeStep) {\n        var $inputs = $theForm.find(':input').filter(function (i, el) {\n            return !$(el).closest('.has-conditions').hasClass('ff_excluded');\n        });\n\n        $inputs.filter((i, el) => {\n            let $el = $(el);\n            return $el.parents().hasClass('ff_repeater_table') &&\n            $el.attr('type') == 'select' &&\n            !$el.val();\n        }).prepend('<option selected disabled />');\n\n        var formData = {\n            active_step: activeStep,\n            data: $inputs.serialize(),\n            form_id: $theForm.data('form_id'),\n            action: 'fluentform_step_form_save_data'\n        };\n        \n        return jQuery.post(fluentFormVars.ajaxUrl, formData);\n    };\n\n    var maybeUpdateDynamicLabels = function (activeStep) {\n        var formSteps = $theForm.find('.fluentform-step');\n        var workStep = $(formSteps[activeStep]);\n\n        jQuery.each(workStep.find('.ff_dynamic_value'), function (index, item) {\n            var ref = $(item).data('ref');\n\n            if (ref == 'payment_summary') {\n                $theForm.trigger('calculate_payment_summary', {\n                    element: $(item)\n                });\n                return;\n            }\n\n            var refElement = $theForm.find('.ff-el-form-control[name=\"' + ref + '\"]');\n\n            var separator = ' ';\n\n            if (!refElement.length) {\n                refElement = $theForm.find('.ff-field_container[data-name=\"' + ref + '\"]').find('input');\n            }\n\n            if (!refElement.length) {\n                // This may radio element / Checkbox element\n                refElement = $theForm.find('*[name=\"' + ref + '\"]:checked');\n                if (!refElement.length) {\n                    refElement = $theForm.find('*[name=\"' + ref + '[]\"]:checked');\n                    separator = ', ';\n                }\n            }\n\n            var refValues = [];\n            $.each(refElement, function () {\n                let inputValue = $(this).val();\n                if (inputValue) {\n                    refValues.push(inputValue);\n                }\n            });\n\n            let replaceValue = '';\n            if (refValues.length) {\n                replaceValue = refValues.join(separator);\n            } else {\n                replaceValue = $(item).data('fallback');\n            }\n\n            $(this).html(replaceValue);\n        });\n    };\n\n    var maybeAutoSlider = function () {\n        let autoSlider = $theForm.find('.ff-step-container').attr('data-enable_auto_slider') == 'yes';\n        if (!autoSlider) {\n            return;\n        }\n\n        function maybeAction($el) {\n            let count = $el.closest('.fluentform-step.active').find('.ff-el-group:not(.ff_excluded)').length;\n            let timeout = window.ffTransitionTimeOut || 400;\n            if (count == 1) {\n                setTimeout(() => {\n                    $el.closest('.fluentform-step.active').find('.ff-btn-next').trigger('click');\n                }, timeout);\n            }\n        };\n\n        $theForm.find('.ff-el-form-check-radio,.ff-el-net-label, .ff-el-ratings label').on('click', function () {\n            maybeAction($(this));\n        });\n\n        $theForm.find('select').on('change', function () {\n            maybeAction($(this));\n        });\n\n    };\n\n    var init = function () {\n        initFormWithSavedState();\n        removePrevFromFirstFirstStep();\n        initStepSlider();\n        maybeAutoSlider();\n    };\n\n    return {\n        init,\n        updateSlider\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/slider.js","export default function ($, $theForm) {\n    var calculationFields = $theForm.find('.ff_has_formula');\n\n    if (!calculationFields.length) {\n        return;\n    }\n\n    let repeaterTriggerCache = {};\n\n    mexp.addToken([\n        {\n            type: 8,\n            token: \"round\",\n            show: \"round\",\n            value: function (value, decimals) {\n                if (!decimals && decimals !== 0) {\n                    decimals = 2;\n                }\n                value = parseFloat(value).toFixed(decimals);\n                return parseFloat(value);\n            }\n        },\n        {\n            type: 8,\n            token: \"max\",\n            show: \"max\",\n            value: function (a, b) {\n                if (a > b)\n                    return a;\n                return b;\n            }\n        }\n    ]);\n\n    // polyfill for matchAll\n    function findAll(regexPattern, sourceString) {\n        let output = []\n        let match\n        // make sure the pattern has the global flag\n        let regexPatternWithGlobal = RegExp(regexPattern, \"g\")\n        while (match = regexPatternWithGlobal.exec(sourceString)) {\n            // get rid of the string copy\n            delete match.input\n            // store the match data\n            output.push(match)\n        }\n        return output\n    }\n\n    var doCalculation = function () {\n        jQuery.each(calculationFields, (index, field) => {\n            var $field = jQuery(field);\n            var formula = $field.data('calculation_formula');\n            let regEx = /{(.*?)}/g;\n            // let matches = [...formula.matchAll(regEx)];\n            let matches = findAll(regEx, formula);\n            let replaces = {};\n\n            jQuery.each(matches, (index, match) => {\n                let itemKey = match[0];\n                if (itemKey.indexOf('{input.') != -1) {\n                    let inputName = itemKey.replace(/{input.|}/g, '');\n                    replaces[itemKey] = $theForm.find('input[name=' + inputName + ']').val() || 0;\n                } else if (itemKey.indexOf('{select.') != -1) { // select Field\n                    let inputName = itemKey.replace(/{select.|}/g, '');\n                    let itemValue = getDataCalcValue('select[data-name=' + inputName + '] option:selected');\n                    $theForm.find('select[data-name=' + inputName + ']').attr('data-calc_value', itemValue);\n                    replaces[itemKey] = itemValue;\n                } else if (itemKey.indexOf('{checkbox.') != -1) { // checkboxes Field\n                    let inputName = itemKey.replace(/{checkbox.|}/g, '');\n                    replaces[itemKey] = getDataCalcValue('input[data-name=' + inputName + ']:checked');\n                } else if (itemKey.indexOf('{radio.') != -1) { // Radio Fields\n                    let inputName = itemKey.replace(/{radio.|}/g, '');\n                    replaces[itemKey] = $theForm.find('input[name=' + inputName + ']:checked').attr('data-calc_value') || 0;\n                } else if (itemKey.indexOf('{repeat.') != -1) { // Radio Fields\n                    let tableName = itemKey.replace(/{repeat.|}/g, '');\n                    let $targetTable = $theForm.find('table[data-root_name=' + tableName + ']');\n\n                    if (!repeaterTriggerCache[tableName]) {\n                        repeaterTriggerCache[tableName] = true;\n                        $targetTable.on('repeat_change', () => {\n                            doCalculation();\n                        });\n                    }\n\n                    replaces[itemKey] = $targetTable.find('tbody tr').length;\n                }\n            });\n\n            jQuery.each(replaces, (key, value) => {\n                if (!value) {\n                    value = 0;\n                }\n                formula = formula.split(key).join(value);\n            });\n            let calculatedValue = '';\n            try {\n                calculatedValue = mexp.eval(formula);\n                if (isNaN(calculatedValue)) {\n                    calculatedValue = '';\n                }\n\n                if(typeof formula == 'string' && formula.indexOf('round') === 0) {\n                    let decimal = parseInt(formula.substr(-2, 1));\n                    if(decimal && Number.isInteger(decimal)) {\n                        calculatedValue = parseFloat(calculatedValue).toFixed(2);\n                    }\n                }\n\n            } catch (error) {\n                console.log(error);\n            }\n\n            if ($field[0].type == 'text') {\n                $($field).val(calculatedValue)\n                    .prop('defaultValue', calculatedValue)\n                    .trigger('change');\n            } else {\n                $field.text(calculatedValue);\n            }\n        });\n    };\n\n    function getDataCalcValue(selector) {\n        let itemValue = 0;\n        let selectedItems = $theForm.find(selector);\n        $.each(selectedItems, (indexItem, item) => {\n            let eachItemValue = $(item).attr('data-calc_value');\n            if (eachItemValue && !isNaN(eachItemValue)) {\n                itemValue += Number(eachItemValue);\n            }\n        });\n        return itemValue;\n    }\n\n    /**\n     * Init Calculation input number fild\n     */\n    var initNumberCalculations = function () {\n        $theForm.find(\n            'input[type=number],input[data-calc_value],select[data-calc_value]'\n        ).on('change keyup', doCalculation).trigger('change');\n        doCalculation();\n    };\n\n    initNumberCalculations();\n}\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/public/Pro/calculations.js"],"sourceRoot":""}